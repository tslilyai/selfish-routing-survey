\subsection{Diverse in Interests}\label{sec:diversity}

The third class of alternative models we consider are ones with diverse selfish behavior. Each agent pursues their own different selfish goal, resulting in a routing solution of the whole network. 

Diverse selfish routing models are useful because they help us understand how we can leverage policies and natural diversity of goals in a network to increase the social welfare and efficiency of the network as a whole. For example, tolls can help increase the social welfare. For example, Beckmann et. al. showed that tolls can help implement the social optimum as an equilibrium, when agents all have the same goal towards a linear combination of time and money \ref{????}.

However, there is some ambiguity in measuring the optimality of any outcome of the whole network with diverse selfish behavior, because by definition, the objective function has changed from the objective of selfish routing with no agent heterogeneity and thus only one criterion. There are thus multiple reasonable ways to characterize the social welfare of a diverse routing network. We will discuss the model adopted by Cole, Lianeas and Nikolova and their newly published results in 2018.

\subsubsection{Model}

We have the same routing network with multiple source-destination pairs and continue with all our previous notations, except that we have included two criteria the players consider in the objective function.

Each agent wants to minimize their own cost, which is a sum of two terms associated with two criteria. Let $\ell_P$ denote the cost of the first criterion (e.g., the latency) over some path $P=(s_i, t_i)$, and $\sigma_P$ be the cost of the second criterion, referred to as the {\it deviation function}. Then given a routing $f$ of the network, the cost of that path is given by $\ell_P+\gamma\cdot \sigma_P=\sum_{e\in P} \ell_e(f_e)+ \sum_{e\in P}\sigma_e(f_e)$, where $\gamma$ is the {\it diversity parameter}.

Note that the latency function has all the properties as we assumed in previous sections, while the deviation function $\sigma_e(x)$ is assumed to be continuous by not necessarily non-decreasing. However, the function $\ell_e+\gamma\cdot \sigma_e$ must be non-decreasing. These assumptions are consistent with our previous risk averse model in Section 3.2, because if $\sigma_e$ models the variance, then $\sigma_e$ could be decreasing in the flow.

Cole et. al. measures the effect of diversity agains the resulting flow of a homogeneous agent population of the same size. The homogeneous agent population has the single diversity parameter $\bar{r}=\int rf(r)d r$. For a heterogeneous equilibrium flow vector $g$, the {\it heterogeneous total cost} of Commodity $k$ is denoted by $C^{k,ht}(g)=\sum_{j=1,\dots, n} d_j^k c^{k, r_j^k}(g)$, where $C^{k, r_j^k}(g)$ denotes the common cost at equilibrium $g$ for players of diversity parameter $r_j^k$ in Commodity $k$. The heterogeneous total cost of $g$ is then $C^{ht}(g)=\sum_{k\in K} C^{k,ht}(g)$. For the corresponding homogeneous equilibrium flow $f$, i.e. the instance with diversity parameter $\bar{r}^k$, where $\bar{r}^k$ denotes the average diversity parameter for Commodity $k$, players of Commodity $k$ share the same cost $c^{\bar{r}^k}(f)$. Then, the homogeneous total cost of Commodity $k$ under $f$ is $C^{k,hm}(f)=d_kc^{\bar{r}^k}(f)$, and the homogeneous total cost of $f$ is $C^{hm}(f)=\sum_{k\in K} C^{k,hm}(f)$. 

The {\it average-respecting demand} means that $\forall i,j: \bar{r}^i=\bar{r}^j$. 


\subsubsection{Results}
Let $g$ denote an equilibrium flow for the heterogeneous agent population and $f$ an equilibrium flow for the corresponding homogeneous agent population. Let $C^{ht}(g)$ denote the cost of flow $g$ and $C^{hm}(f)$ the cost of flow $f$. 

A {\it multi-commodity network} is consistent with all our previous models. We also introduce the definition of a {\it single-commodity network} as a network whose edges all belong to some single source-destination path as only these edges are going to be used by the equilibria and thus all other edges can be discarded. We present the following main results.

\begin{definition}A directed $s-t$ network $G$ is series-parallel if it consists of a single edge $(s, t)$, or it is formed by the series or parallel composition of two series-parallel networks with terminals $(s_1, t_1)$ and $(s_2, t_2)$, respectively.
\end{definition}

\begin{theorem}
For any $s-t$ series-parallel network $G$ with a single commodity, we have $C^{ht}(g)\le C^{hm}(f)$.
\label{diverse1}
\end{theorem}

\begin{proof-sketch}

This theorem essentially states that for single-commodity networks, diversity is always helpful in a single-commodity series parallel network.

The key observation is that since $f$ and $g$ route the same amount of flow from the unique source to the unique sink, there must be a path $P$ where $f$ sends no less flow along than $g$ does. Since the network is series-parallel, for every edge $e$ in $P$, $f_e \ge g_e$. This is true because a path in a series-parallel network can be broken up into some series-parallel parts in series and some series-parallel parts in parallel, which recursively breaks down to a simple series of edge(s). Hence for any $r\in [0, r_{\max}]$, we have $c_P^r(f)\ge c_P^r(g)$.

\end{proof-sketch}



\begin{theorem}
For any $s-t$ non-series-parallel network $G$ with a single commodity, there exists cost functions $C$ for which $C^{ht}(g)> C^{hm}(f)$.
\end{theorem}

\begin{proof-sketch}

This theorem essentially states that for single-commodity networks, diversity is always helpful only in a series-parallel network. Together with Theorem \ref{diverse1}, we know that the series-parallel structure is a sufficient and necessary condition for diversity to always be helpful.

The key reason is that for a series-parallel network, if two flows $|f|\ge |g|$, then there must be a parallel part $P_1$ of the network where $f$ sends more flow than $g$ on. This must be true because we can trivially think of the whole network as $P_1$. Since in a series-parallel network, we can decompose $P_1$ into some
\end{proof-sketch}


\begin{theorem}
For any $k$-commodity block-matching network with average-respecting demand, $C^{ht}(g)\le C^{hm}(f)$.
\label{diverse2}
\end{theorem}

\begin{proof-sketch}

This theorem essentially states that for multi-commodity networks, diversity is always helpful on any block-matching network with average-respecting demand. 
\end{proof-sketch}



\begin{theorem}
For any $k$-commodity network, if diversity helps for every instance on $G$ with average-respecting demand, we have $C^{ht}(g)\le C^{hm}(f)$, then $G$ is a block-matching network.
\end{theorem}

\begin{proof-sketch}

This theorem essentially states that for multi-commodity networks, diversity is always helpful only on any block-matching network with average-respecting demand. Together with Theorem \ref{diverse2}, we know that the block-matching structure is a sufficient and necessary condition for diversity to always be helpful in a multi-commodity network.
\end{proof-sketch}

